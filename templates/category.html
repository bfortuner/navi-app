{% extends "base.html" %}

{% block content %}

<div class="problemTitle">
  <h1>{{category}}</h1>


  <div class="navLinks">
    <a id="greenButton" href="/problem/{{category}}/1/random">Random</a><a id="probCount">Completed: {% if user != None %}{{user.getProbsComplete(category)}}{% else %}0{% endif %}/{{cat.getProbCount()}}</a>
  </div>
</div>


<div id="categoryList"> <!--Start of Category List-->
{% for problem in probList %}
        <div class="problem">
                <div class="probNum">{{loop.index}}.</div>

                <div class="probSnippet">
                        <div class="snippetTitle"><a href="/problem/{{problem.getProblemId()}}">{{problem.getTitle()}}</a>
			  {% if user != None %}
			  {% if user.getProbStatus(problem.getProblemId()) == 'incorrect' %}
			  <span name="checkmark" style="color:red; font-size:25px; font-weight: bold; line-height:10px;">&#x2718;</span>
			  {% elif user.getProbStatus(problem.getProblemId()) == 'correct' %}
			  <span name="checkmark" style="color:green; font-size:25px; font-weight: bold; line-height:10px;">&#x2713;</span>
			  {% endif %}
			  {% endif %}
			</div>
			<div class="description">
			  <pre class="snippetDesc">{{problem.getDesc()[:300]}}</pre>
			</div>
                        <!--<div class="submitted">Submitted by <a href="">Brendan Fortuner</a>, Student at University of Virginia</div>-->
                </div><!--End Snippet Section-->

                <div class="rating">
                        <div class="difficultyScore"><img class="iqscore" src={{ url_for('static', filename='images/iqscore.png') }} alt="difficulty"/>{{problem.getDifficulty()}}</div>
                        <div class="votes">{{ problem.getDifficultyVotes() }} votes</div>
			{% if user != None %}
                        <div class="rate">
			  <!--{{problem.getProblemId()}}-->
			  <form name="{{problem.getProblemId()}}" method="post"> Rate:
                            <!--<select accesskey="S" onchange="javascript:onClick = alert('Sorry! We are still working on that feature.')">-->
			      <select name="rate" id="difficulty" onchange="vote({{loop.index}})">
				{% if user.getUserDiff(problem.getProblemId()) == 0 or user.getUserDiff(problem.getProblemId()) == None %}
				<option value="0 {{problem.getProblemId()}}" {% if user.getUserDiff(problem.getProblemId()) == 0 %} selected {% endif %}>-</option>
				{% endif %}
				<option value="1 {{problem.getProblemId()}}" {% if user.getUserDiff(problem.getProblemId()) == 1 %} selected {% endif %}>1</option>
				<option value="2 {{problem.getProblemId()}}" {% if user.getUserDiff(problem.getProblemId()) == 2 %} selected {% endif %}>2</option>
				<option value="3 {{problem.getProblemId()}}" {% if user.getUserDiff(problem.getProblemId()) == 3 %} selected {% endif %}>3</option>
                            </select>
                          </form>
			</div><!--End Rate-->
			{% endif %}
                </div><!--End Rating-->


		<div class="clear"></div>
        </div><!-- End Problem -->

{% endfor %}
</div><!--End Category List -->


<script type="text/javascript">
function vote(problem_id) {
//    document.write(typeof problem_id)
    var new_id = problem_id.toString();
//    document.write(typeof new_id)
    document.forms[problem_id].submit();
} 
</script>


{% endblock %}
